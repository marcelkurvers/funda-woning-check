{
  "executed_at": "2025-12-21T09:16:59.819766Z",
  "root": "/Users/marcelkurvers/Development/funda-app/backend",
  "summary": {
    "total_runs": 6,
    "success": 0,
    "failed": 1,
    "skipped": 5
  },
  "runs": [
    {
      "framework": "pytest",
      "command": "pytest",
      "exit_code": 1,
      "raw_output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.4, pytest-9.0.2, pluggy-1.6.0 -- /Library/Frameworks/Python.framework/Versions/3.11/bin/python3.11\ncachedir: .pytest_cache\nrootdir: /Users/marcelkurvers/Development/funda-app\nconfigfile: pytest.ini\nplugins: anyio-4.10.0\ncollecting ... collected 206 items\n\ntests/e2e/test_frontend.py::TestFrontendStructure::test_01_index_html_structure PASSED [  0%]\ntests/e2e/test_frontend.py::TestFrontendStructure::test_02_preferences_html_structure PASSED [  0%]\ntests/e2e/test_pdf_export.py::TestPDFExport::test_pdf_export_functionality PASSED [  1%]\ntests/integration/test_comprehensive.py::TestComprehensive::test_all_chapters_generated PASSED [  1%]\ntests/integration/test_comprehensive.py::TestComprehensive::test_energy_label_logic PASSED [  2%]\ntests/integration/test_comprehensive.py::TestComprehensive::test_kpi_calculations_robustness PASSED [  2%]\ntests/integration/test_consistency.py::TestChapterConsistency::test_bedroom_logic PASSED [  3%]\ntests/integration/test_consistency.py::TestChapterConsistency::test_content_text_consistency PASSED [  3%]\ntests/integration/test_consistency.py::TestChapterConsistency::test_energy_label_consistency PASSED [  4%]\ntests/integration/test_consistency.py::TestChapterConsistency::test_living_area_consistency PASSED [  4%]\ntests/integration/test_consistency.py::TestChapterConsistency::test_price_consistency PASSED [  5%]\ntests/integration/test_consistency.py::TestChapterConsistency::test_sqm_price_consistency PASSED [  5%]\ntests/integration/test_docker_sync.py::TestDockerSync::test_ensure_latest_docker_build PASSED [  6%]\ntests/integration/test_integration.py::TestIntegration::test_full_flow_with_paste FAILED [  6%]\ntests/integration/test_integration_fixtures.py::TestFixturesOutput::test_fixtures_generation \ntests/integration/test_integration_fixtures.py::TestFixturesOutput::test_fixtures_generation PASSED [  7%]\ntests/quality/test_audit_codebase.py::test_audit_codebase_for_mocks_and_hardcoded_items PASSED [  7%]\ntests/quality/test_dynamism.py::TestDynamism::test_dynamism_score_generation PASSED [  8%]\ntests/test_verify_consistency.py::test_consistency_check_happy_path FAILED [  8%]\ntests/test_verify_consistency.py::test_consistency_check_detects_price_mismatch PASSED [  9%]\ntests/test_verify_consistency.py::test_consistency_check_detects_label_mismatch PASSED [  9%]\ntests/unit/test_ai_interpretation.py::TestAiInterpretation::test_all_chapters_generation \ntests/unit/test_ai_interpretation.py::TestAiInterpretation::test_all_chapters_generation PASSED [ 10%]\ntests/unit/test_ai_interpretation.py::TestAiInterpretation::test_html_structure_consistency PASSED [ 10%]\ntests/unit/test_ai_interpretation.py::TestAiInterpretation::test_scenario_luxury_villa PASSED [ 11%]\ntests/unit/test_ai_interpretation.py::TestAiInterpretation::test_scenario_modern_eco_house PASSED [ 11%]\ntests/unit/test_ai_interpretation.py::TestAiInterpretation::test_scenario_old_fixer_upper PASSED [ 12%]\ntests/unit/test_api_endpoints.py::TestApiEndpoints::test_create_run_defaults PASSED [ 12%]\ntests/unit/test_api_endpoints.py::TestApiEndpoints::test_get_nonexistent_run PASSED [ 13%]\ntests/unit/test_api_endpoints.py::TestApiEndpoints::test_health_check FAILED [ 13%]\ntests/unit/test_api_endpoints.py::TestApiEndpoints::test_preferences_api PASSED [ 14%]\ntests/unit/test_api_endpoints.py::TestApiEndpoints::test_start_run_updates_status PASSED [ 14%]\ntests/unit/test_async_pipeline.py::TestAsyncPipeline::test_start_run_returns_immediately PASSED [ 15%]\ntests/unit/test_async_pipeline.py::TestAsyncPipeline::test_status_polling_endpoint_exists FAILED [ 15%]\ntests/unit/test_async_pipeline.py::TestAsyncPipeline::test_status_polling_progress_calculation FAILED [ 16%]\ntests/unit/test_async_pipeline.py::TestAsyncPipeline::test_status_endpoint_404_for_nonexistent_run PASSED [ 16%]\ntests/unit/test_async_pipeline.py::TestAsyncPipeline::test_pipeline_runs_in_background FAILED [ 16%]\ntests/unit/test_async_pipeline.py::TestAsyncPipeline::test_multiple_concurrent_pipelines FAILED [ 17%]\ntests/unit/test_async_pipeline.py::TestThreadExecutor::test_executor_exists PASSED [ 17%]\ntests/unit/test_async_pipeline.py::TestThreadExecutor::test_simulate_pipeline_callable PASSED [ 18%]\ntests/unit/test_async_pipeline.py::TestBackwardCompatibility::test_report_endpoint_still_works PASSED [ 18%]\ntests/unit/test_async_pipeline.py::TestBackwardCompatibility::test_create_run_endpoint_unchanged PASSED [ 19%]\ntests/unit/test_chapter_0_logic.py::TestChapter0Logic::test_address_cleanup PASSED [ 19%]\ntests/unit/test_chapter_0_logic.py::TestChapter0Logic::test_robotic_currency PASSED [ 20%]\ntests/unit/test_chapter_0_logic.py::TestChapter0Logic::test_maintenance_consistency PASSED [ 20%]\ntests/unit/test_chapter_routines.py::TestChapterRoutines::test_chapter_file_correspondence \ntests/unit/test_chapter_routines.py::TestChapterRoutines::test_chapter_file_correspondence PASSED [ 21%]\ntests/unit/test_chapter_routines.py::TestChapterRoutines::test_unique_layout_per_page PASSED [ 21%]\ntests/unit/test_chapter_routines.py::TestChapterRoutines::test_z_generate_design_compliance_report PASSED [ 22%]\ntests/unit/test_chapters.py::TestChapters::test_chapter_generation PASSED [ 22%]\ntests/unit/test_chapters.py::TestChapters::test_chapter_registry PASSED  [ 23%]\ntests/unit/test_complex_parsing.py::TestComplexParsing::test_no_classes_layout FAILED [ 23%]\ntests/unit/test_config_api.py::test_get_full_config PASSED               [ 24%]\ntests/unit/test_config_api.py::test_get_config_section PASSED            [ 24%]\ntests/unit/test_config_api.py::test_get_config_section_not_found PASSED  [ 25%]\ntests/unit/test_config_api.py::test_get_config_value PASSED              [ 25%]\ntests/unit/test_config_api.py::test_update_config_bulk FAILED            [ 26%]\ntests/unit/test_config_api.py::test_update_config_value FAILED           [ 26%]\ntests/unit/test_config_api.py::test_update_config_invalid_section PASSED [ 27%]\ntests/unit/test_config_api.py::test_update_config_invalid_key PASSED     [ 27%]\ntests/unit/test_display_units.py::TestDisplayUnits::test_derived_metrics_consistency PASSED [ 28%]\ntests/unit/test_display_units.py::TestDisplayUnits::test_no_duplicate_m2_in_hero PASSED [ 28%]\ntests/unit/test_display_units.py::TestDisplayUnits::test_no_duplicate_m2_in_metrics PASSED [ 29%]\ntests/unit/test_display_units.py::TestDisplayUnits::test_price_m2_calculation_accuracy PASSED [ 29%]\ntests/unit/test_domain_models.py::TestDomainModels::test_chapter_output_flexibility PASSED [ 30%]\ntests/unit/test_domain_models.py::TestDomainModels::test_property_core_defaults PASSED [ 30%]\ntests/unit/test_domain_models.py::TestDomainModels::test_ui_component_structure PASSED [ 31%]\ntests/unit/test_dynamic_chapters.py::TestDynamicChapters::test_all_chapters_generate_modern_dashboard \ntests/unit/test_dynamic_chapters.py::TestDynamicChapters::test_all_chapters_generate_modern_dashboard PASSED [ 31%]\ntests/unit/test_dynamic_chapters.py::TestDynamicChapters::test_chapter_titles PASSED [ 32%]\ntests/unit/test_dynamic_chapters.py::TestDynamicChapters::test_dynamic_intelligence_integration PASSED [ 32%]\ntests/unit/test_explore_insights.py::TestExploreInsights::test_capture_chapter_insights PASSED [ 33%]\ntests/unit/test_frontend_compatibility.py::TestRegression::test_chapter_data_bridging FAILED [ 33%]\ntests/unit/test_frontend_compatibility.py::TestRegression::test_chapter_id_present FAILED [ 33%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_endpoint_exists PASSED [ 34%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_valid_image FAILED [ 34%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_jpg_image FAILED [ 35%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_non_image_file_rejected FAILED [ 35%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_oversized_image_rejected PASSED [ 36%]\ntests/unit/test_image_upload.py::TestImageUpload::test_uploaded_file_is_accessible PASSED [ 36%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_generates_unique_filenames PASSED [ 37%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_preserves_file_extension FAILED [ 37%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_directory_exists PASSED [ 38%]\ntests/unit/test_image_upload.py::TestImageUpload::test_upload_handles_special_characters_in_filename PASSED [ 38%]\ntests/unit/test_image_upload.py::TestImageUploadIntegration::test_paste_with_media_urls PASSED [ 39%]\ntests/unit/test_image_upload.py::TestImageUploadSecurity::test_upload_without_authentication PASSED [ 39%]\ntests/unit/test_image_upload.py::TestImageUploadSecurity::test_path_traversal_prevention PASSED [ 40%]\ntests/unit/test_intelligence.py::TestIntelligenceEngine::test_chapter_0_executive_summary FAILED [ 40%]\ntests/unit/test_intelligence.py::TestIntelligenceEngine::test_chapter_4_energy_logic PASSED [ 41%]\ntests/unit/test_intelligence.py::TestIntelligenceEngine::test_generate_chapter_narrative_structure PASSED [ 41%]\ntests/unit/test_intelligence.py::TestIntelligenceEngine::test_parse_int_helper PASSED [ 42%]\ntests/unit/test_modern_chapter.py::TestModernChapter::test_chapter_structure_modern PASSED [ 42%]\ntests/unit/test_modern_chapter.py::TestModernChapter::test_energy_chapter_layout PASSED [ 43%]\ntests/unit/test_modern_design_compliance.py::TestModernDesignCompliance::test_all_chapters_exist PASSED [ 43%]\ntests/unit/test_modern_design_compliance.py::TestModernDesignCompliance::test_data_integrity_no_placeholders PASSED [ 44%]\ntests/unit/test_modern_design_compliance.py::TestModernDesignCompliance::test_enriched_by_ai_check PASSED [ 44%]\ntests/unit/test_modern_design_compliance.py::TestModernDesignCompliance::test_modern_4k_structure_compliance \ntests/unit/test_modern_design_compliance.py::TestModernDesignCompliance::test_modern_4k_structure_compliance PASSED [ 45%]\ntests/unit/test_ollama_integration.py::TestOllamaIntegration::test_ai_narrative_generation_failure_fallback PASSED [ 45%]\ntests/unit/test_ollama_integration.py::TestOllamaIntegration::test_ai_narrative_generation_success FAILED [ 46%]\ntests/unit/test_ollama_integration.py::TestOllamaIntegration::test_prompt_structure_contains_preferences PASSED [ 46%]\ntests/unit/test_ollama_integration.py::TestOllamaIntegration::test_provider_injection PASSED [ 47%]\ntests/unit/test_parser.py::TestParser::test_bedroom_extraction_from_rooms PASSED [ 47%]\ntests/unit/test_parser.py::TestParser::test_comprehensive_field_extraction FAILED [ 48%]\ntests/unit/test_parser.py::TestParser::test_cross_validation_bedrooms_vs_rooms PASSED [ 48%]\ntests/unit/test_parser.py::TestParser::test_data_quality_report PASSED   [ 49%]\ntests/unit/test_parser.py::TestParser::test_illogical_data_validation FAILED [ 49%]\ntests/unit/test_parser.py::TestParser::test_parse_real_fixture PASSED    [ 50%]\ntests/unit/test_parser.py::TestParser::test_parse_sample FAILED          [ 50%]\ntests/unit/test_parser_edge_cases.py::TestParserEdgeCases::test_navigation_text_address_bug PASSED [ 50%]\ntests/unit/test_parser_edge_cases.py::TestParserEdgeCases::test_photo_count_as_rooms_bug PASSED [ 51%]\ntests/unit/test_parser_edge_cases.py::TestParserEdgeCases::test_suspicious_room_count_correction FAILED [ 51%]\ntests/unit/test_parser_edge_cases.py::TestParserEdgeCases::test_duplicate_m2_display_fix PASSED [ 52%]\ntests/unit/test_parser_edge_cases_additional.py::test_address_blocklist_ignored FAILED [ 52%]\ntests/unit/test_parser_edge_cases_additional.py::test_bedroom_capping FAILED [ 53%]\ntests/unit/test_preferences_compliance.py::TestPreferencesCompliance::test_marcel_petra_preferences_match FAILED [ 53%]\ntests/unit/test_preferences_compliance.py::TestPreferencesCompliance::test_missing_preferences_handling FAILED [ 54%]\ntests/unit/test_preferenties_vergelijking.py::TestPreferentiesVergelijking::test_vergelijking_logica PASSED [ 54%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_list_providers_returns_all_registered PASSED [ 55%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_get_provider_class_ollama PASSED [ 55%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_get_provider_class_openai PASSED [ 56%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_get_provider_class_anthropic PASSED [ 56%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_get_provider_class_gemini PASSED [ 57%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_get_provider_class_unknown_returns_none PASSED [ 57%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_register_new_provider PASSED [ 58%]\ntests/unit/test_provider_factory.py::TestProviderRegistry::test_register_overwrites_existing PASSED [ 58%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_ollama_provider_default PASSED [ 59%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_ollama_provider_custom_url PASSED [ 59%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_ollama_provider_custom_timeout PASSED [ 60%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_openai_provider_with_api_key PASSED [ 60%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_openai_provider_without_api_key_raises_error PASSED [ 61%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_anthropic_provider_with_api_key PASSED [ 61%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_anthropic_provider_without_api_key_raises_error PASSED [ 62%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_gemini_provider_with_api_key PASSED [ 62%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_gemini_provider_without_api_key_raises_error PASSED [ 63%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_unknown_provider_raises_error PASSED [ 63%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_provider_with_extra_kwargs PASSED [ 64%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_create_all_providers_with_valid_config PASSED [ 64%]\ntests/unit/test_provider_factory.py::TestProviderFactory::test_provider_factory_respects_timeout_parameter PASSED [ 65%]\ntests/unit/test_provider_factory.py::TestFactoryRegistryIntegration::test_factory_uses_registry_for_provider_lookup PASSED [ 65%]\ntests/unit/test_provider_factory.py::TestFactoryRegistryIntegration::test_custom_provider_can_be_registered_and_created PASSED [ 66%]\ntests/unit/test_provider_factory.py::TestFactoryRegistryIntegration::test_all_registered_providers_can_be_created PASSED [ 66%]\ntests/unit/test_provider_factory.py::TestProviderFactoryErrorHandling::test_none_provider_name_raises_error PASSED [ 66%]\ntests/unit/test_provider_factory.py::TestProviderFactoryErrorHandling::test_empty_provider_name_raises_error PASSED [ 67%]\ntests/unit/test_provider_factory.py::TestProviderFactoryErrorHandling::test_case_sensitive_provider_names PASSED [ 67%]\ntests/unit/test_provider_factory.py::TestProviderFactoryErrorHandling::test_helpful_error_message_lists_available_providers PASSED [ 68%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_initialization_default PASSED [ 68%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_initialization_custom_url PASSED [ 69%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_initialization_env_var PASSED [ 69%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_initialization_docker_env PASSED [ 70%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_name_property PASSED [ 70%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_list_models_success PASSED [ 71%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_list_models_http_error PASSED [ 71%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_list_models_connection_error PASSED [ 72%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_generate_success PASSED [ 72%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_generate_timeout PASSED [ 73%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_check_health_success PASSED [ 73%]\ntests/unit/test_providers.py::TestOllamaProvider::test_ollama_check_health_failure PASSED [ 74%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_initialization_with_key PASSED [ 74%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_initialization_from_env PASSED [ 75%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_initialization_no_key_raises_error PASSED [ 75%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_name_property PASSED [ 76%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_list_models PASSED [ 76%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_generate_success PASSED [ 77%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_generate_with_json_mode PASSED [ 77%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_generate_error_handling PASSED [ 78%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_check_health_success PASSED [ 78%]\ntests/unit/test_providers.py::TestOpenAIProvider::test_openai_check_health_failure PASSED [ 79%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_initialization_with_key PASSED [ 79%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_initialization_custom_timeout PASSED [ 80%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_name_property PASSED [ 80%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_list_models PASSED [ 81%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_generate_success PASSED [ 81%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_generate_with_json_mode PASSED [ 82%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_generate_timeout_error PASSED [ 82%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_check_health_success PASSED [ 83%]\ntests/unit/test_providers.py::TestAnthropicProvider::test_anthropic_check_health_failure PASSED [ 83%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_initialization_with_key PASSED [ 83%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_initialization_from_google_env PASSED [ 84%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_initialization_from_gemini_env PASSED [ 84%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_initialization_no_key_raises_error PASSED [ 85%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_name_property PASSED [ 85%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_list_models PASSED [ 86%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_generate_success PASSED [ 86%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_generate_with_json_mode PASSED [ 87%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_generate_error_handling PASSED [ 87%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_check_health_success PASSED [ 88%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_check_health_no_api_key PASSED [ 88%]\ntests/unit/test_providers.py::TestGeminiProvider::test_gemini_check_health_failure PASSED [ 89%]\ntests/unit/test_providers.py::TestProviderInterface::test_all_providers_implement_interface PASSED [ 89%]\ntests/unit/test_providers.py::TestProviderInterface::test_all_providers_have_name_property PASSED [ 90%]\ntests/unit/test_utils.py::TestParsingUtilities::test_parse_float_invalid PASSED [ 90%]\ntests/unit/test_utils.py::TestParsingUtilities::test_parse_float_valid PASSED [ 91%]\ntests/unit/test_utils.py::TestParsingUtilities::test_parse_int_custom_default PASSED [ 91%]\ntests/unit/test_utils.py::TestParsingUtilities::test_parse_int_formatted_numbers PASSED [ 92%]\ntests/unit/test_utils.py::TestParsingUtilities::test_parse_int_invalid_inputs PASSED [ 92%]\ntests/unit/test_utils.py::TestParsingUtilities::test_parse_int_valid_numbers PASSED [ 93%]\ntests/unit/test_utils.py::TestValidationUtilities::test_validate_bedrooms_explicit_count PASSED [ 93%]\ntests/unit/test_utils.py::TestValidationUtilities::test_validate_bedrooms_minimum PASSED [ 94%]\ntests/unit/test_utils.py::TestValidationUtilities::test_validate_bedrooms_normal_range PASSED [ 94%]\ntests/unit/test_utils.py::TestValidationUtilities::test_validate_bedrooms_upper_bound PASSED [ 95%]\ntests/unit/test_utils.py::TestValidationUtilities::test_validate_living_area_bounds PASSED [ 95%]\ntests/unit/test_utils.py::TestValidationUtilities::test_validate_living_area_normal PASSED [ 96%]\ntests/unit/test_utils.py::TestSafetyUtilities::test_ensure_grid_layout_existing PASSED [ 96%]\ntests/unit/test_utils.py::TestSafetyUtilities::test_ensure_grid_layout_missing PASSED [ 97%]\ntests/unit/test_utils.py::TestSafetyUtilities::test_safe_get_existing_key PASSED [ 97%]\ntests/unit/test_utils.py::TestSafetyUtilities::test_safe_get_missing_key PASSED [ 98%]\ntests/unit/test_utils.py::TestSafetyUtilities::test_safe_get_none_value PASSED [ 98%]\ntests/unit/test_utils.py::TestEdgeCases::test_parse_int_extreme_values PASSED [ 99%]\ntests/unit/test_utils.py::TestEdgeCases::test_validate_bedrooms_edge_cases PASSED [ 99%]\ntests/unit/test_utils.py::TestEdgeCases::test_validate_living_area_warnings PASSED [100%]\n\n=================================== FAILURES ===================================\n__________________ TestIntegration.test_full_flow_with_paste ___________________\ntests/integration/test_integration.py:48: in test_full_flow_with_paste\n    self.assertEqual(resp.status_code, 200)\nE   AssertionError: 404 != 200\n----------------------------- Captured stdout call -----------------------------\n\n[Test] Starting Run...\n[Test] Pasting HTML content...\n------------------------------ Captured log call -------------------------------\nERROR    main:main.py:176 \u2717 Failed to initialize AI Provider (ollama): Unknown provider: ollama. Available providers: \nERROR    main:main.py:259 Scrape failed: 'Scraper' object has no attribute 'derive_property_core'\n_ TestFixturesOutput.test_fixtures_generation (file='/Users/marcelkurvers/Development/funda-app/backend/tests/integration/../fixtures/sample_funda.html') _\ntests/integration/test_integration_fixtures.py:82: in test_fixtures_generation\n    self.assertIn(\"sidebar\", layout, f\"Chapter {cid} layout missing sidebar\")\nE   AssertionError: 'sidebar' not found in {'main': {'title': 'Algemene Woningkenmerken', 'content': \"<p>De bebouwingsdichtheid is hoog (circa 100%), wat typerend is voor een stedelijke of centrum-locatie. Elke vierkante meter wordt hier benut.</p><p>Degelijke bouw uit 1995. Een periode waarin praktische indelingen centraal stonden.</p>\\n<h3>Begrip van de KPI's</h3><ul><li><strong>Vraagprijs:</strong> De marktwaarde-indicatie.</li><li><strong>Woonoppervlak:</strong> De netto bruikbare ruimte (NEN2580).</li><li><strong>Bouwjaar:</strong> Indicatie voor bouwqualiteit en isolatienormen.</li><li><strong>Energielabel:</strong> Impact op comfort en maandlasten.</li></ul>\"}, 'metrics': [{'id': 'fallback', 'label': 'Status', 'value': 'AI Generated'}]} : Chapter 1 layout missing sidebar\n______________________ test_consistency_check_happy_path _______________________\ntests/test_verify_consistency.py:30: in test_consistency_check_happy_path\n    assert len(mismatches) == 0, f\"Expected 0 mismatches, found: {mismatches}\"\nE   AssertionError: Expected 0 mismatches, found: [{'field': 'balcony', 'status': 'mismatch', 'source': 'Text Scan', 'parsed': 'Nee', 'message': \"Waarde 'Nee' niet gevonden als losstaand woord.\"}]\nE   assert 1 == 0\nE    +  where 1 = len([{'field': 'balcony', 'message': \"Waarde 'Nee' niet gevonden als losstaand woord.\", 'parsed': 'Nee', 'source': 'Text Scan', ...}])\n------------------------------ Captured log call -------------------------------\nWARNING  backend.consistency:consistency.py:135 Consistency Issues: 1 fields mismatch.\n______________________ TestApiEndpoints.test_health_check ______________________\ntests/unit/test_api_endpoints.py:58: in test_health_check\n    self.assertEqual(resp.status_code, 200)\nE   AssertionError: 404 != 200\n____________ TestAsyncPipeline.test_status_polling_endpoint_exists _____________\ntests/unit/test_async_pipeline.py:64: in test_status_polling_endpoint_exists\n    status_response = client.get(f\"/runs/{run_id}/status\")\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:518: in get\n    return super().get(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1053: in get\n    return self.request(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:488: in request\n    return super().request(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:381: in handle_request\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:378: in handle_request\n    portal.call(self.app, scope, receive, send)\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:291: in call\n    return cast(T_Retval, self.start_task_soon(func, *args).result())\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:222: in _call_func\n    retval = await retval_or_awaitable\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__\n    await super().__call__(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py:113: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__\n    await self.app(scope, receive, _send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:715: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:735: in app\n    await route.handle(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:288: in handle\n    await self.app(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:76: in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:73: in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:301: in app\n    raw_response = await run_endpoint_function(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:214: in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/concurrency.py:39: in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/to_thread.py:56: in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:2476: in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:967: in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\nmain.py:403: in get_run_status\n    return run_to_overview(row)\n           ^^^^^^^^^^^^^^^^^^^^\nmain.py:141: in run_to_overview\n    \"artifacts\": json.loads(row[\"artifacts_json\"]),\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py:339: in loads\n    raise TypeError(f'the JSON object must be str, bytes or bytearray, '\nE   TypeError: the JSON object must be str, bytes or bytearray, not NoneType\n__________ TestAsyncPipeline.test_status_polling_progress_calculation __________\ntests/unit/test_async_pipeline.py:83: in test_status_polling_progress_calculation\n    status_response = client.get(f\"/runs/{run_id}/status\")\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:518: in get\n    return super().get(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1053: in get\n    return self.request(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:488: in request\n    return super().request(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:381: in handle_request\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:378: in handle_request\n    portal.call(self.app, scope, receive, send)\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:291: in call\n    return cast(T_Retval, self.start_task_soon(func, *args).result())\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:222: in _call_func\n    retval = await retval_or_awaitable\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__\n    await super().__call__(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py:113: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__\n    await self.app(scope, receive, _send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:715: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:735: in app\n    await route.handle(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:288: in handle\n    await self.app(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:76: in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:73: in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:301: in app\n    raw_response = await run_endpoint_function(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:214: in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/concurrency.py:39: in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/to_thread.py:56: in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:2476: in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:967: in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\nmain.py:403: in get_run_status\n    return run_to_overview(row)\n           ^^^^^^^^^^^^^^^^^^^^\nmain.py:141: in run_to_overview\n    \"artifacts\": json.loads(row[\"artifacts_json\"]),\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py:339: in loads\n    raise TypeError(f'the JSON object must be str, bytes or bytearray, '\nE   TypeError: the JSON object must be str, bytes or bytearray, not NoneType\n______________ TestAsyncPipeline.test_pipeline_runs_in_background ______________\ntests/unit/test_async_pipeline.py:112: in test_pipeline_runs_in_background\n    status_response = client.get(f\"/runs/{run_id}/status\")\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:518: in get\n    return super().get(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1053: in get\n    return self.request(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:488: in request\n    return super().request(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:381: in handle_request\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:378: in handle_request\n    portal.call(self.app, scope, receive, send)\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:291: in call\n    return cast(T_Retval, self.start_task_soon(func, *args).result())\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:222: in _call_func\n    retval = await retval_or_awaitable\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__\n    await super().__call__(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py:113: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__\n    await self.app(scope, receive, _send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:715: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:735: in app\n    await route.handle(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:288: in handle\n    await self.app(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:76: in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:73: in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:301: in app\n    raw_response = await run_endpoint_function(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:214: in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/concurrency.py:39: in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/to_thread.py:56: in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:2476: in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:967: in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\nmain.py:403: in get_run_status\n    return run_to_overview(row)\n           ^^^^^^^^^^^^^^^^^^^^\nmain.py:141: in run_to_overview\n    \"artifacts\": json.loads(row[\"artifacts_json\"]),\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py:339: in loads\n    raise TypeError(f'the JSON object must be str, bytes or bytearray, '\nE   TypeError: the JSON object must be str, bytes or bytearray, not NoneType\n------------------------------ Captured log call -------------------------------\nERROR    main:main.py:176 \u2717 Failed to initialize AI Provider (ollama): Unknown provider: ollama. Available providers:\n_____________ TestAsyncPipeline.test_multiple_concurrent_pipelines _____________\ntests/unit/test_async_pipeline.py:150: in test_multiple_concurrent_pipelines\n    status = client.get(f\"/runs/{run_id}/status\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:518: in get\n    return super().get(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1053: in get\n    return self.request(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:488: in request\n    return super().request(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:381: in handle_request\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:378: in handle_request\n    portal.call(self.app, scope, receive, send)\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:291: in call\n    return cast(T_Retval, self.start_task_soon(func, *args).result())\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:222: in _call_func\n    retval = await retval_or_awaitable\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__\n    await super().__call__(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py:113: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__\n    await self.app(scope, receive, _send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:715: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:735: in app\n    await route.handle(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:288: in handle\n    await self.app(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:76: in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:73: in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:301: in app\n    raw_response = await run_endpoint_function(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:214: in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/concurrency.py:39: in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/to_thread.py:56: in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:2476: in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/anyio/_backends/_asyncio.py:967: in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\nmain.py:403: in get_run_status\n    return run_to_overview(row)\n           ^^^^^^^^^^^^^^^^^^^^\nmain.py:141: in run_to_overview\n    \"artifacts\": json.loads(row[\"artifacts_json\"]),\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py:339: in loads\n    raise TypeError(f'the JSON object must be str, bytes or bytearray, '\nE   TypeError: the JSON object must be str, bytes or bytearray, not NoneType\n------------------------------ Captured log call -------------------------------\nERROR    main:main.py:176 \u2717 Failed to initialize AI Provider (ollama): Unknown provider: ollama. Available providers: \nERROR    main:main.py:176 \u2717 Failed to initialize AI Provider (ollama): Unknown provider: ollama. Available providers:\n__________________ TestComplexParsing.test_no_classes_layout ___________________\ntests/unit/test_complex_parsing.py:93: in test_no_classes_layout\n    self.assertEqual(data[\"energy_label\"], \"C\")\nE   AssertionError: '?' != 'C'\nE   - ?\nE   + C\n----------------------------- Captured stdout call -----------------------------\nParsed No-Class Data: {'asking_price_eur': '\u20ac 325.000', 'address': 'Adres onbekend', 'living_area_m2': '120 m\u00b2', 'plot_area_m2': '200 m\u00b2', 'build_year': '1980', 'energy_label': '?', 'rooms': '4', 'bedrooms': None, 'bathrooms': None, 'property_type': None, 'construction_type': None, 'garage': None, 'garden': None, 'balcony': 'Nee', 'roof_type': None, 'heating': None, 'insulation': None, 'volume_m3': None, 'service_costs': None, 'acceptance': None, 'ownership': None, 'listed_since': None, 'media_urls': []}\n___________________________ test_update_config_bulk ____________________________\ntests/unit/test_config_api.py:77: in test_update_config_bulk\n    response = client.post(\"/api/config/\", json=update_data)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:597: in post\n    return super().post(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1144: in post\n    return self.request(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:488: in request\n    return super().request(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:381: in handle_request\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:378: in handle_request\n    portal.call(self.app, scope, receive, send)\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:291: in call\n    return cast(T_Retval, self.start_task_soon(func, *args).result())\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:222: in _call_func\n    retval = await retval_or_awaitable\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__\n    await super().__call__(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py:113: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__\n    await self.app(scope, receive, _send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:715: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:735: in app\n    await route.handle(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:288: in handle\n    await self.app(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:76: in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:73: in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:301: in app\n    raw_response = await run_endpoint_function(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:212: in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\napi/config.py:77: in update_config_bulk\n    _persist_section(\"ai\", settings.ai.model_dump())\napi/config.py:61: in _persist_section\n    con = _get_conn()\n          ^^^^^^^^^^^\napi/config.py:20: in _get_conn\n    return sqlite3.connect(settings.database_url)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   sqlite3.OperationalError: unable to open database file\n___________________________ test_update_config_value ___________________________\ntests/unit/test_config_api.py:104: in test_update_config_value\n    response = client.put(\"/api/config/ai/timeout\", json=50)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:630: in put\n    return super().put(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1181: in put\n    return self.request(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:488: in request\n    return super().request(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:825: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:914: in send\n    response = self._send_handling_auth(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:942: in _send_handling_auth\n    response = self._send_handling_redirects(\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:979: in _send_handling_redirects\n    response = self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../Library/Python/3.11/lib/python/site-packages/httpx/_client.py:1014: in _send_single_request\n    response = transport.handle_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:381: in handle_request\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/testclient.py:378: in handle_request\n    portal.call(self.app, scope, receive, send)\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:291: in call\n    return cast(T_Retval, self.start_task_soon(func, *args).result())\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n../../../Library/Python/3.11/lib/python/site-packages/anyio/from_thread.py:222: in _call_func\n    retval = await retval_or_awaitable\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__\n    await super().__call__(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/applications.py:113: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__\n    await self.app(scope, receive, _send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:715: in __call__\n    await self.middleware_stack(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:735: in app\n    await route.handle(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:288: in handle\n    await self.app(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:76: in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:62: in wrapped_app\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/_exception_handler.py:51: in wrapped_app\n    await app(scope, receive, sender)\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/starlette/routing.py:73: in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:301: in app\n    raw_response = await run_endpoint_function(\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/fastapi/routing.py:212: in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\napi/config.py:131: in update_config_value\n    _persist_section(section, target_section.model_dump())\napi/config.py:61: in _persist_section\n    con = _get_conn()\n          ^^^^^^^^^^^\napi/config.py:20: in _get_conn\n    return sqlite3.connect(settings.database_url)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   sqlite3.OperationalError: unable to open database file\n__________________ TestRegression.test_chapter_data_bridging ___________________\ntests/unit/test_frontend_compatibility.py:34: in test_chapter_data_bridging\n    self.assertIn(\"metrics\", cd, f\"Chapter {i} chapter_data MISSING 'metrics'\")\nE   AssertionError: 'metrics' not found in {'title': 'Executive Summary', 'intro': 'Welkom bij de analyse van het object aan de Test Street 1. De vraagprijs bedraagt \u20ac500,000 (circa \u20ac5,000/m\u00b2). Het woonoppervlak is 100 m\u00b2. Energielabel: ONBEKEND.', 'main_analysis': '\\n        <div class=\"lead-text\" style=\"font-size: 1.1rem; line-height: 1.6; color: #334155; margin-bottom: 2rem;\">\\n            Welkom bij de analyse van het object aan de Test Street 1. De vraagprijs bedraagt \u20ac500,000 (circa \u20ac5,000/m\u00b2). Het woonoppervlak is 100 m\u00b2. Energielabel: ONBEKEND.\\n        </div>\\n\\n        <div class=\"analysis-grid\" style=\"margin-bottom: 2rem;\">\\n            <div class=\"analysis-item\">\\n                <div class=\"analysis-icon valid\"><ion-icon name=\"construct\"></ion-icon></div>\\n                <div class=\"analysis-text\">\\n                    <strong>Bouwtechnische Staat</strong><br>\\n                    Relatief jonge bouw; beperkt risico.\\n                </div>\\n            </div>\\n            <div class=\"analysis-item\">\\n                <div class=\"analysis-icon valid\"><ion-icon name=\"cash\"></ion-icon></div>\\n                <div class=\"analysis-text\">\\n                    <strong>Waardering</strong><br>\\n                    Marktconform (+4% vs markt)\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div class=\"ai-analysis-content\" style=\"margin-bottom: 2rem; padding: 1rem; background: #f8fafc; border-radius: 8px; border-left: 4px solid #6366f1;\">\\n            <h4 style=\"margin-top:0; color:#4f46e5;\">AI Analyse</h4>\\n            <p>De woning lijkt instapklaar; wij voorzien in de basis geen directe investering voor verduurzaming.</p>\\n<h3>Begrip van de KPI\\'s</h3><ul><li><strong>Vraagprijs:</strong> De marktwaarde-indicatie.</li><li><strong>Woonoppervlak:</strong> De netto bruikbare ruimte (NEN2580).</li><li><strong>Bouwjaar:</strong> Indicatie voor bouwqualiteit en isolatienormen.</li><li><strong>Energielabel:</strong> Impact op comfort en maandlasten.</li></ul>\\n            \\n<p><strong>Match voor Marcel & Petra:</strong> Op basis van jullie profiel sluit dit hoofdstuk aan op de specifieke kenmerken die jullie belangrijk vinden.</p>\\n        </div>\\n\\n        <div style=\"background: white; border-radius: 12px; border: 1px solid #e2e8f0; padding: 1.5rem;\">\\n            <h4 style=\"margin-top:0; color:#334155; margin-bottom: 1rem;\">Sterke & Zwakke Punten</h4>\\n            <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;\">\\n                <div>\\n                    <h5 style=\"color:#10b981; margin:0 0 0.5rem 0;\">Voordelen</h5>\\n                    <ul style=\"list-style:none; padding:0; margin:0; font-size: 0.95rem; color:#475569;\"><li class=\\'pro\\'><ion-icon name=\\'checkmark-circle\\' style=\\'color:#10b981\\'></ion-icon> Uitstekend energielabel (Toekomstbestendig)</li></ul>\\n                </div>\\n                <div>\\n                    <h5 style=\"color:#ef4444; margin:0 0 0.5rem 0;\">Aandachtspunten</h5>\\n                    <ul style=\"list-style:none; padding:0; margin:0; font-size: 0.95rem; color:#475569;\"></ul>\\n                </div>\\n            </div>\\n        </div>\\n        ', 'conclusion': '<strong>Conclusie:</strong> Controleer de ontbrekende gegevens voor een volledige beoordeling.', 'strengths': ['Uitstekend energielabel (Toekomstbestendig)'], 'advice': [], 'interpretation': '\\n<p><strong>Match voor Marcel & Petra:</strong> Op basis van jullie profiel sluit dit hoofdstuk aan op de specifieke kenmerken die jullie belangrijk vinden.</p>', 'sidebar_items': [{'type': 'advisor_score', 'title': 'AI Aankoop Score', 'score': 80, 'content': 'Score bepaald o.b.v. Marktconform, Label ONBEKEND en marktcourantheid.'}, {'type': 'advisor_card', 'title': 'Strategisch Advies', 'style': 'gradient', 'content': '<strong>Conclusie:</strong> Controleer de ontbrekende gegevens voor een volledige beoordeling.'}, {'type': 'action_list', 'title': 'Noodzakelijke Acties', 'items': ['Onderhoudshistorie opvragen', 'Energielabel checken in register', 'Juridische erfdienstbaarheden controleren']}], 'property_core': {'address': 'Test Street 1', 'asking_price_eur': '500000', 'living_area_m2': '100', '_preferences': {'theme': 'light', 'language': 'nl', 'ai_model': 'gpt-4'}}} : Chapter 0 chapter_data MISSING 'metrics'\n____________________ TestRegression.test_chapter_id_present ____________________\ntests/unit/test_frontend_compatibility.py:22: in test_chapter_id_present\n    self.assertEqual(chapters[key][\"id\"], key, f\"Chapter {key} id mismatch\")\nE   AssertionError: None != '0' : Chapter 0 id mismatch\n___________________ TestImageUpload.test_upload_valid_image ____________________\ntests/unit/test_image_upload.py:65: in test_upload_valid_image\n    assert \"size\" in data\nE   AssertionError: assert 'size' in {'ok': True, 'url': '/uploads/3ff9d08b-4ca3-4a06-b64e-a0b55bd634e6.png'}\n____________________ TestImageUpload.test_upload_jpg_image _____________________\ntests/unit/test_image_upload.py:80: in test_upload_jpg_image\n    assert response.json()[\"url\"].endswith(\".jpg\")\nE   AssertionError: assert False\nE    +  where False = <built-in method endswith of str object at 0x115b93e50>('.jpg')\nE    +    where <built-in method endswith of str object at 0x115b93e50> = '/uploads/0f47975d-dd02-41a8-a9b2-b7a89fd520f8.png'.endswith\n_____________ TestImageUpload.test_upload_non_image_file_rejected ______________\ntests/unit/test_image_upload.py:90: in test_upload_non_image_file_rejected\n    assert \"must be an image\" in response.json()[\"detail\"].lower()\nE   AssertionError: assert 'must be an image' in 'must be image'\nE    +  where 'must be image' = <built-in method lower of str object at 0x114bd3830>()\nE    +    where <built-in method lower of str object at 0x114bd3830> = 'Must be image'.lower\n_____________ TestImageUpload.test_upload_preserves_file_extension _____________\ntests/unit/test_image_upload.py:154: in test_upload_preserves_file_extension\n    assert url.endswith(expected_ext)\nE   AssertionError: assert False\nE    +  where False = <built-in method endswith of str object at 0x114ae5ae0>('.jpg')\nE    +    where <built-in method endswith of str object at 0x114ae5ae0> = '/uploads/ed0be40c-05c7-423b-9313-b5fcd712cc07.png'.endswith\n___________ TestIntelligenceEngine.test_chapter_0_executive_summary ____________\ntests/unit/test_intelligence.py:62: in test_chapter_0_executive_summary\n    self.assertIn(\"onvolledig\", nar_missing['main_analysis'].lower()) # Should warn about missing KPIs\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: 'onvolledig' not found in \"<p>gezien het energielabel is verduurzaming noodzakelijk. houd rekening met een stevige investering.</p>\\n<h3>begrip van de kpi's</h3><ul><li><strong>vraagprijs:</strong> de marktwaarde-indicatie.</li><li><strong>woonoppervlak:</strong> de netto bruikbare ruimte (nen2580).</li><li><strong>bouwjaar:</strong> indicatie voor bouwqualiteit en isolatienormen.</li><li><strong>energielabel:</strong> impact op comfort en maandlasten.</li></ul>\"\n__________ TestOllamaIntegration.test_ai_narrative_generation_success __________\ntests/unit/test_ollama_integration.py:65: in test_ai_narrative_generation_success\n    self.assertIn(\"Deze analyse is gegenereerd door de Funda AI-engine\", result['interpretation'])\nE   AssertionError: 'Deze analyse is gegenereerd door de Funda AI-engine' not found in 'AI Interpretation (AI Enhanced)'\n________________ TestParser.test_comprehensive_field_extraction ________________\ntests/unit/test_parser.py:206: in test_comprehensive_field_extraction\n    self.assertGreater(extraction_rate, 0.8,\nE   AssertionError: 0.6111111111111112 not greater than 0.8 : Should extract at least 80% of fields. Missing: ['asking_price_per_m2', 'property_type', 'construction_type', 'garage', 'garden', 'heating', 'insulation']\n__________________ TestParser.test_illogical_data_validation ___________________\ntests/unit/test_parser.py:117: in test_illogical_data_validation\n    self.assertIn(\"_parsing_warnings\", data, \"Illogical data should generate warnings\")\nE   AssertionError: '_parsing_warnings' not found in {'asking_price_eur': '\u20ac 450.000', 'address': 'Test Address', 'living_area_m2': None, 'plot_area_m2': None, 'build_year': None, 'energy_label': '?', 'rooms': '33', 'bedrooms': '33', 'bathrooms': '20', 'property_type': None, 'construction_type': None, 'garage': None, 'garden': None, 'balcony': 'Nee', 'roof_type': None, 'heating': None, 'insulation': None, 'volume_m3': None, 'service_costs': None, 'acceptance': None, 'ownership': None, 'listed_since': None, 'media_urls': []} : Illogical data should generate warnings\n_________________________ TestParser.test_parse_sample _________________________\ntests/unit/test_parser.py:74: in test_parse_sample\n    self.assertEqual(data[\"plot_area_m2\"], \"200 m\u00b2\")\nE   AssertionError: '120 m\u00b2' != '200 m\u00b2'\nE   - 120 m\u00b2\nE   ? -\nE   + 200 m\u00b2\nE   ?   +\n__________ TestParserEdgeCases.test_suspicious_room_count_correction ___________\ntests/unit/test_parser_edge_cases.py:89: in test_suspicious_room_count_correction\n    assert validated[\"rooms\"] != \"54\"\nE   AssertionError: assert '54' != '54'\n________________________ test_address_blocklist_ignored ________________________\ntests/unit/test_parser_edge_cases_additional.py:20: in test_address_blocklist_ignored\n    assert data[\"address\"] == \"Amsterdamseweg 123, 1111 AA Diemen\"\nE   AssertionError: assert 'Menu Amsterd...111 AA Diemen' == 'Amsterdamsew...111 AA Diemen'\nE     \nE     - Amsterdamseweg 123, 1111 AA Diemen\nE     + Menu Amsterdamseweg 123, 1111 AA Diemen\nE     ? +++++\n_____________________________ test_bedroom_capping _____________________________\ntests/unit/test_parser_edge_cases_additional.py:32: in test_bedroom_capping\n    assert data[\"bedrooms\"] == str(parser.MAX_BEDROOMS)\nE   AssertionError: assert '54' == '15'\nE     \nE     - 15\nE     + 54\n________ TestPreferencesCompliance.test_marcel_petra_preferences_match _________\ntests/unit/test_preferences_compliance.py:18: in setUp\n    IntelligenceEngine.set_client(None)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: type object 'IntelligenceEngine' has no attribute 'set_client'\n_________ TestPreferencesCompliance.test_missing_preferences_handling __________\ntests/unit/test_preferences_compliance.py:18: in setUp\n    IntelligenceEngine.set_client(None)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AttributeError: type object 'IntelligenceEngine' has no attribute 'set_client'\n=========================== short test summary info ============================\nFAILED tests/integration/test_integration.py::TestIntegration::test_full_flow_with_paste\nSUBFAILED(file='/Users/marcelkurvers/Development/funda-app/backend/tests/integration/../fixtures/sample_funda.html') tests/integration/test_integration_fixtures.py::TestFixturesOutput::test_fixtures_generation\nFAILED tests/test_verify_consistency.py::test_consistency_check_happy_path - ...\nFAILED tests/unit/test_api_endpoints.py::TestApiEndpoints::test_health_check\nFAILED tests/unit/test_async_pipeline.py::TestAsyncPipeline::test_status_polling_endpoint_exists\nFAILED tests/unit/test_async_pipeline.py::TestAsyncPipeline::test_status_polling_progress_calculation\nFAILED tests/unit/test_async_pipeline.py::TestAsyncPipeline::test_pipeline_runs_in_background\nFAILED tests/unit/test_async_pipeline.py::TestAsyncPipeline::test_multiple_concurrent_pipelines\nFAILED tests/unit/test_complex_parsing.py::TestComplexParsing::test_no_classes_layout\nFAILED tests/unit/test_config_api.py::test_update_config_bulk - sqlite3.Opera...\nFAILED tests/unit/test_config_api.py::test_update_config_value - sqlite3.Oper...\nFAILED tests/unit/test_frontend_compatibility.py::TestRegression::test_chapter_data_bridging\nFAILED tests/unit/test_frontend_compatibility.py::TestRegression::test_chapter_id_present\nFAILED tests/unit/test_image_upload.py::TestImageUpload::test_upload_valid_image\nFAILED tests/unit/test_image_upload.py::TestImageUpload::test_upload_jpg_image\nFAILED tests/unit/test_image_upload.py::TestImageUpload::test_upload_non_image_file_rejected\nFAILED tests/unit/test_image_upload.py::TestImageUpload::test_upload_preserves_file_extension\nFAILED tests/unit/test_intelligence.py::TestIntelligenceEngine::test_chapter_0_executive_summary\nFAILED tests/unit/test_ollama_integration.py::TestOllamaIntegration::test_ai_narrative_generation_success\nFAILED tests/unit/test_parser.py::TestParser::test_comprehensive_field_extraction\nFAILED tests/unit/test_parser.py::TestParser::test_illogical_data_validation\nFAILED tests/unit/test_parser.py::TestParser::test_parse_sample - AssertionEr...\nFAILED tests/unit/test_parser_edge_cases.py::TestParserEdgeCases::test_suspicious_room_count_correction\nFAILED tests/unit/test_parser_edge_cases_additional.py::test_address_blocklist_ignored\nFAILED tests/unit/test_parser_edge_cases_additional.py::test_bedroom_capping\nFAILED tests/unit/test_preferences_compliance.py::TestPreferencesCompliance::test_marcel_petra_preferences_match\nFAILED tests/unit/test_preferences_compliance.py::TestPreferencesCompliance::test_missing_preferences_handling\n====== 27 failed, 180 passed, 473 warnings, 52 subtests passed in 12.95s =======",
      "start_time": "2025-12-21T09:16:46.319366Z",
      "end_time": "2025-12-21T09:16:59.720352Z",
      "status": "failed",
      "reason": null,
      "parsed_results": null
    },
    {
      "framework": "jest",
      "command": "npx jest --runInBand",
      "exit_code": -1,
      "raw_output": "Skipped: no JS/TS test files found.",
      "start_time": "2025-12-21T09:16:46.319103Z",
      "end_time": "2025-12-21T09:16:46.319103Z",
      "status": "skipped",
      "reason": "Detected 2 JS/TS source files but no test files to execute.",
      "parsed_results": null
    },
    {
      "framework": "go test",
      "command": "go test ./... -v",
      "exit_code": -1,
      "raw_output": "Skipped: no Go source files detected.",
      "start_time": "2025-12-21T09:16:46.319103Z",
      "end_time": "2025-12-21T09:16:46.319103Z",
      "status": "skipped",
      "reason": "No Go source files detected in repository.",
      "parsed_results": null
    },
    {
      "framework": "cargo test",
      "command": "cargo test --verbose",
      "exit_code": -1,
      "raw_output": "Skipped: no Rust source files detected.",
      "start_time": "2025-12-21T09:16:46.319103Z",
      "end_time": "2025-12-21T09:16:46.319103Z",
      "status": "skipped",
      "reason": "No Rust source files detected in repository.",
      "parsed_results": null
    },
    {
      "framework": "maven/gradle",
      "command": "mvn test || gradle test",
      "exit_code": -1,
      "raw_output": "Skipped: no Java source files detected.",
      "start_time": "2025-12-21T09:16:46.319103Z",
      "end_time": "2025-12-21T09:16:46.319103Z",
      "status": "skipped",
      "reason": "No Java source files detected in repository.",
      "parsed_results": null
    },
    {
      "framework": "rspec/minitest",
      "command": "rspec || rake test",
      "exit_code": -1,
      "raw_output": "Skipped: no Ruby source files detected.",
      "start_time": "2025-12-21T09:16:46.319103Z",
      "end_time": "2025-12-21T09:16:46.319103Z",
      "status": "skipped",
      "reason": "No Ruby source files detected in repository.",
      "parsed_results": null
    }
  ]
}